{"version":3,"sources":["./src/app/folder/publicaciones/publicaciones.page.html","./src/app/folder/publicaciones/publicaciones-routing.module.ts","./src/app/folder/publicaciones/publicaciones.module.ts","./src/app/folder/publicaciones/publicaciones.page.scss","./src/app/folder/publicaciones/publicaciones.page.ts","./src/app/services/publicidad.service.ts"],"names":[],"mappings":"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","file":"folder-publicaciones-publicaciones-module.js","sourcesContent":["export default \"<app-header nombre=\\\"publicaciones\\\"></app-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-slides pager=\\\"true\\\" [options]=\\\"slideOpts\\\" style=\\\"margin-top: 8.5px;\\\">\\r\\n    <ion-slide style=\\\"height: 350px;width: 95%;margin: auto\\\" *ngFor=\\\"let publicidadDetalle of publicidad\\\">\\r\\n      \\r\\n      <ion-content>\\r\\n        <ion-item>\\r\\n\\r\\n          <ion-button  expand=\\\"full\\\" href=\\\"{{publicidadDetalle.Imagen}}\\\" color=\\\"light\\\" style=\\\"height: 100%;width: 100%;\\\" fill=\\\"clear\\\"><ion-img src=\\\"{{publicidadDetalle.Imagen}}\\\" style=\\\"height: 275px;width: 100%;\\\"></ion-img></ion-button>\\r\\n          <!-- <ion-img src=\\\"{{publicidadDetalle.Imagen}}\\\" style=\\\"height: 275px;width: 100%;\\\"></ion-img> -->\\r\\n\\r\\n        </ion-item>\\r\\n        <div style=\\\"margin:auto;\\\">\\r\\n          <!-- <ion-button  expand=\\\"full\\\"  expand=\\\"full\\\" href=\\\"{{publicidadDetalle.Imagen}}\\\" style=\\\"width: 50px;height: 50px;\\\" color=\\\"light\\\"><ion-icon name=\\\"expand-outline\\\" size=\\\"large\\\" ></ion-icon> </ion-button> -->\\r\\n          <a href= 'https://api.whatsapp.com/send?phone={{publicidadDetalle.Telefono}}'><ion-icon name=\\\"logo-whatsapp\\\" size=\\\"large\\\" color=\\\"success\\\" style=\\\"margin-right: 8px;\\\"></ion-icon></a>\\r\\n        </div>\\r\\n\\r\\n      </ion-content>\\r\\n      \\r\\n    </ion-slide>\\r\\n    <!-- <ion-slide *ngIf='publicidad.Imagen!=\\\"\\\"' style=\\\"height: 325px;width: 85%;margin: auto\\\">\\r\\n      <ion-button expand=\\\"full\\\" href=\\\"{{publicidad.Imagen}}\\\" color=\\\"light\\\" style=\\\"height: 100%;width: 100%;\\\" fill=\\\"clear\\\"><ion-img src=\\\"{{publicidad.Imagen}}\\\" style=\\\"height: 275px;width: 100%;\\\"></ion-img></ion-button>\\r\\n    </ion-slide> -->\\r\\n    \\r\\n  </ion-slides>\\r\\n\\r\\n\\r\\n  <ion-list *ngFor=\\\"let publicacion of publicaciones\\\">\\r\\n    <ion-card style=\\\"background-color: #ACC8FC\\\">\\r\\n\\r\\n        <ion-card-header (click)='aumentarVisitaPublicacion(publicacion.id,publicacion.Usuario,publicacion)'>\\r\\n          <ion-item>\\r\\n            <ion-card-title >{{publicacion.Titulo}}</ion-card-title>  \\r\\n          </ion-item> \\r\\n\\r\\n        </ion-card-header>\\r\\n\\r\\n        <ion-card-content (click)='aumentarVisitaPublicacion(publicacion.id,publicacion.Usuario,publicacion)'>\\r\\n          {{publicacion.Descripcion}}\\r\\n        </ion-card-content>\\r\\n\\r\\n        <ion-item>\\r\\n\\r\\n          <ion-icon *ngIf=\\\"publicacion.Usuario == idUser\\\" name=\\\"trash-outline\\\" slot='start' color='danger'(click)=\\\"alert(publicacion.id)\\\"></ion-icon>\\r\\n          <ion-item slot='end'>\\r\\n            \\r\\n            {{publicacion.Fecha | date:'yyyy/MM/dd'}}\\r\\n          </ion-item>\\r\\n\\r\\n        </ion-item>\\r\\n        \\r\\n        \\r\\n\\r\\n      \\r\\n    </ion-card>\\r\\n\\r\\n  </ion-list>\\r\\n\\r\\n\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button [routerLink]=\\\"['/crear-publicaciones-generales']\\\">\\r\\n    <ion-icon name=\\\"add-outline\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PublicacionesPage } from './publicaciones.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PublicacionesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PublicacionesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PublicacionesPageRoutingModule } from './publicaciones-routing.module';\r\n\r\nimport { PublicacionesPage } from './publicaciones.page';\r\n\r\nimport {ComponentsModule} from 'src/app/folder/components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ComponentsModule,\r\n    PublicacionesPageRoutingModule\r\n  ],\r\n  declarations: [PublicacionesPage]\r\n})\r\nexport class PublicacionesPageModule {}\r\n","export default \"ion-content {\\n  --ion-background-color:#ffffff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZm9sZGVyL3B1YmxpY2FjaW9uZXMvcHVibGljYWNpb25lcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSw4QkFBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvZm9sZGVyL3B1YmxpY2FjaW9uZXMvcHVibGljYWNpb25lcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudHtcclxuICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6I2ZmZmZmZjtcclxufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { PublicacionesGenerales } from 'src/app/models/publicacionesGenerales';\r\nimport { PublicacionesGeneralesService } from 'src/app/services/publicaciones-generales.service';\r\nimport { Publicidad } from 'src/app/models/publicidad';\r\nimport { PublicidadService } from 'src/app/services/publicidad.service';\r\nimport { AngularFireStorage } from 'angularfire2/storage';\r\nimport { AlertController, LoadingController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-publicaciones',\r\n  templateUrl: './publicaciones.page.html',\r\n  styleUrls: ['./publicaciones.page.scss'],\r\n})\r\nexport class PublicacionesPage implements OnInit {\r\n  slideOpts = {\r\n    initialSlide: 0,\r\n    speed: 400\r\n  };\r\n\r\n  idUser;\r\n\r\n  publicaciones : PublicacionesGenerales[] = [];\r\n  publicidad: Publicidad[] = []\r\n  \r\n  constructor(private angularFireStorage: AngularFireStorage,\r\n              private router: Router,\r\n              private alertCtrt: AlertController,\r\n              private publicacionesService: PublicacionesGeneralesService,\r\n              private publicidadService: PublicidadService,\r\n              private activateRoute: ActivatedRoute,\r\n              public loadingController: LoadingController) { }\r\n\r\n  ngOnInit() {\r\n    this.publicacionesService.getPublicaciones().subscribe(res=> {this.publicaciones = res;});\r\n    this.publicidadService.getPublicidad().subscribe(res => {this.publicidad = res;this.shuffle(this.publicidad)});\r\n    this.idUser = localStorage.getItem('userId');\r\n  }\r\n\r\n  async alert(id) {\r\n    const alert = await this.alertCtrt.create({\r\n      cssClass: 'my-custom-class',\r\n      header: \"¿Desea eliminar esta publicación?\",\r\n      buttons: [\r\n          {\r\n            text: 'Cancelar',\r\n            role: 'cancel',\r\n            cssClass: 'secondary',\r\n            handler: (blah) => {\r\n              //console.log('Confirm Cancel: blah');\r\n            }\r\n          }, {\r\n            text: 'Elminar',\r\n            handler: (data) => {\r\n              this.remove(id)                  \r\n            }\r\n          }\r\n        ]\r\n    });\r\n    await alert.present();\r\n  }\r\n  remove(id){\r\n     this.publicacionesService.removePublicacion(id)\r\n  }\r\n\r\n  aumentarVisitaPublicacion(id:string,usuario:string,publicacion:PublicacionesGenerales){\r\n    publicacion.Visitas= publicacion.Visitas + 1\r\n    this.publicacionesService.updatePublicacion(id,publicacion)\r\n    this.router.navigate(['/publicacion-detalle',id,usuario]); \r\n  }\r\n\r\n  shuffle(array) {\r\n    var currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n\r\n      // Pick a remaining element...\r\n      randomIndex = Math.floor(Math.random() * currentIndex);\r\n      currentIndex -= 1;\r\n\r\n      // And swap it with the current element.\r\n      temporaryValue = array[currentIndex];\r\n      array[currentIndex] = array[randomIndex];\r\n      array[randomIndex] = temporaryValue;\r\n    }\r\n    return array;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AngularFirestore, AngularFirestoreCollection } from 'angularfire2/firestore';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Publicidad } from '../models/publicidad';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PublicidadService {\n\n  private publicidadCollection: AngularFirestoreCollection <Publicidad>;\n  private publicidad: Observable<Publicidad[]>;\n\n  constructor(private firestore: AngularFirestore) {\n    this.publicidadCollection = firestore.collection('Publicidad'); //, ref => ref.where(\"Nombre\", \"==\", \"Celulares\")\n    this.publicidad = this.publicidadCollection.snapshotChanges().pipe(map(\n      actions =>{\n        return actions.map( a=>{\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return {id, ...data}\n        })\n      }\n    ))\n   }\n  getPublicidad(){\n    return this.publicidad;\n  }\n\n}"],"sourceRoot":"webpack:///"}