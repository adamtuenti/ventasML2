<app-header nombre="locales"></app-header>

<ion-content>

  <ion-segment color="tertiary" value="comentarios">

    <ion-segment-button value="anuncios" [routerLink]="['/detalle-local',idLocal,idPropietario]" routerDirection="root">
      <ion-icon name="information-circle-outline" size="large"></ion-icon>
      <ion-label style="font-size: 11px;">Datos</ion-label>
    </ion-segment-button>

    <ion-segment-button value="cartilla" [routerLink]="['/productos-locales',idLocal,idPropietario]"
      routerDirection="root">
      <ion-icon name="book-outline" size="large"></ion-icon>
      <ion-label style="font-size: 11px;">Cartilla</ion-label>
    </ion-segment-button>

    <ion-segment-button value="comentarios" [routerLink]="['/comentarios-local',idLocal,idPropietario]"
      routerDirection="root">
      <ion-icon name="chatbubbles-outline" size="large"></ion-icon>
      <ion-label style="font-size: 11px;">Comentarios</ion-label>
    </ion-segment-button>

  </ion-segment>

  <ng-container *ngIf="!condicion">
    <ion-list>
      <ng-container *ngFor="let comentario of comentarios">
        <ng-container *ngFor="let usuario of usuarios">
          <ng-container *ngIf="comentario.Empresa == idLocal">


            <ion-card *ngIf="usuario.id == comentario.Usuario">

              <ion-card-header>
                <ion-item>
                  <ion-avatar>
                    <img src="{{usuario.Foto}}">
                  </ion-avatar>

                  <ion-label style="margin-left: 7.5px;font-weight:bold">{{usuario.Nombre}} {{usuario.Apellido}}
                  </ion-label>


                  <ion-icon *ngIf='idUser == comentario.Usuario' name="trash-outline" slot="end" color='danger'
                    (click)="alert(comentario.id)"></ion-icon>
                </ion-item>

              </ion-card-header>

              <ion-card-content>
                <ion-item>

                  <label
                    style="font-size: 15.5px;color:black;align-items: center;margin-bottom: 5.5px;">{{comentario.Descripcion}}</label>
                </ion-item>



                <ion-item>
                  <label slot='end'>{{comentario.Fecha | date:'yyyy/MM/dd'}}</label>
                </ion-item>

              </ion-card-content>

            </ion-card>
          </ng-container>
        </ng-container>


      </ng-container>


    </ion-list>


  </ng-container>

  <ng-container *ngIf="condicion">

    <div style="margin-top: 50px;" align='center'>
      <ion-text color="medium">

        <img
          src="https://firebasestorage.googleapis.com/v0/b/ventasml2.appspot.com/o/iconos%2Ffile_search.png?alt=media&token=79e21b5c-d8e4-4124-abd8-be52f0bce666"
          style="width: 250px; height:250px;margin:auto;" alet="foto">

        <p style="font-size: 21px;margin:auto;margin-top:7.5px">No hay comentarios realizados.</p>
      </ion-text>
    </div>
  </ng-container>



  <ion-fab *ngIf='idPropietario != idUser' vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="validarSesion()">
      <ion-icon name="add-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>