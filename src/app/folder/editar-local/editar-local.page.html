<!-- <app-header nombre="locales"></app-header> -->

<ion-content>


  <form #form="ngForm" (ngSubmit)="UpdateLocal(form)">
    <ion-list class="item-background-color">







      <ion-card class="item-background-color" style="margin-top:15px">
        <ion-item>
          <ion-label style='font-weight: bold;'>Nombre del local <b class='obligatorio'>*</b> </ion-label>
        </ion-item>
        <ion-item>

          <ion-input value='{{local.Nombre}}' name="nombre" type='text' ngModel maxlength="25"></ion-input>
        </ion-item>

      </ion-card>


      <ion-card class="item-background-color" style="margin-top:15px">
        <ion-item class="item-background-color">
          <ion-label style='font-weight: bold;'>Descripción del local <b class='obligatorio'>*</b> </ion-label>
        </ion-item>
        <ion-item class="item-background-color" lines='none'>
          <ion-textarea value='{{local.Descripcion}}' class='textArea' name="descripcion" type='text' ngModel>
          </ion-textarea>
        </ion-item>
      </ion-card>





      <!-- <ion-item class="item-background-color">
        <ion-icon name="storefront-outline" color="success" size='large' style = 'margin-right: 7.5px;'></ion-icon>
        <ion-input value="{{local.Nombre}}" name="nombre" type='text' maxLength = "25" ngModel></ion-input>
      </ion-item> -->

      <ion-card class="item-background-color" style="margin-top:15px">
        <ion-item>
          <ion-label style='font-weight: bold;'>Teléfono del local <b class='obligatorio'>*</b></ion-label>
        </ion-item>
        <ion-item>
          <ion-textarea class='textArea' maxLength='15' (ionInput)="countChangeNumeroLocal($event)"
            value={{local.Telefono}} name="telefono" type='number' ngModel></ion-textarea>
        </ion-item>
      </ion-card>

      <ion-card style="margin-top:15px">
        <ion-item>
          <ion-label style='font-weight: bold;'>Referencia <b class='obligatorio'>*</b></ion-label>
        </ion-item>
        <ion-item>
          <ion-textarea class='textArea' value='{{local.Referencia}}' name="referencia" type='text' ngModel>
          </ion-textarea>
        </ion-item>
      </ion-card>





      <!-- <ion-item class="item-background-color">
        <ion-icon name="logo-whatsapp" size='large' color='success' style='margin-right: 7.5px;'></ion-icon>
        <ion-input value="{{local.Telefono}}" name="telefono" type='text' ngModel></ion-input>
      </ion-item> -->

      <ion-card class="item-background-color" style="margin-top:15px">
        <ion-item>

          <ion-label style='font-weight: bold;'>Red social</ion-label>
        </ion-item>
        <ion-item class="item-background-color">
          <ion-textarea placeholder='Ingrese la red social de su local' class='textArea' value='{{local.RedSocial}}'
            name="redSocial" type='text' ngModel></ion-textarea>

          <!-- <ion-textarea *ngIf = 'local.RedSocial == ""' placeholder = 'Ingrese la red social de su local' class='textArea' name="redSocial"
            type='text' ngModel></ion-textarea> -->


        </ion-item>
      </ion-card>



      <ion-card class="item-background-color" style="margin-top:15px">
        <ion-item lines='none' class="item-background-color">
          <ion-label style='font-weight: bold;'>Horario de atención <b class='obligatorio'>*</b></ion-label>
        
          <ion-icon (click) = 'editarHorario = true' *ngIf = 'editarHorario === false' name="create-outline" color='success'></ion-icon>
          <ion-icon (click) = 'editarHorario = false' *ngIf = 'editarHorario === true' name="close-outline" color='danger'></ion-icon>
        </ion-item>
      </ion-card>

      <h1 *ngIf='!loaded'>
        <ion-skeleton-text [animated]="true" style="width: 85%; height: 275px;"></ion-skeleton-text>
      </h1>

      <ion-item *ngIf='horarioInicial.length < 5 && editarHorario === false' class = 'item-background-color' lines = 'none' style = 'text-align: center;'>
        <ion-label style = 'margin-left: auto; margin-right: auto;'>{{local.HorarioAtencion}}</ion-label>
      </ion-item>


      <div  *ngIf = 'horarioInicial.length > 5 && editarHorario === false' align = 'center' style='padding-bottom: 7.5px; padding-top: 2.5px;margin-left: auto; margin-right: auto;'>
        <ion-row style = 'padding: 2.5px; text-align: center;' *ngFor = 'let dia of horarioInicial; let i = index'>

          <ion-col sizeLg="2" sizeMd="4" sizeXs="6" >
            <ion-label [ngStyle]="{'font-weight': (diaActual == i) ? 'bold' : 'none', 'font-size': (diaActual == i) ? '15.5px' : '15px'}" style='text-align: center; margin-right: 7.5px;'>
              {{dias[i]}}
            </ion-label>

          </ion-col>

        <ion-col sizeLg="2" sizeMd="4" sizeXs="6" style = 'text-align: left;'>

        <ion-label [ngStyle]="{'font-style': (dia=='cerrado') ? 'italic' : 'normal', 'font-weight': (diaActual == i) ? 'bold' : 'none', 'font-size': (diaActual == i) ? '15.5px' : '15px'}" style='text-align: left;'>
          {{dia}}
        </ion-label>

        </ion-col>

        </ion-row>
      </div>

      <ion-card class="item-background-color" *ngIf='editarHorario'>
        <ion-item class="item-background-color" *ngFor='let dia of dias; let i = index'>
          <ion-label>{{dia}}</ion-label>

          <ion-label *ngIf='respuestasEditar[i][0] == "" && respuestasEditar[i][1] == ""' (click)='guardarHorario(i)'>
            <img src='../../../assets/cerrado.png' style="height: 25px; width: 58.5px; margin-left: 12.5px;" />
          </ion-label>


          <ion-datetime color="white" #picker2 display-format="HH:mm" locale="es-ES"
            style='margin-left: auto; margin-right: 3.5px; color: black !important'
            (ionChange)="changeDate(picker2, i, 0)">
          </ion-datetime>
          <ion-icon style='color: black;' (click)="picker2.open()" *ngIf='respuestasEditar[i][0] == ""' size='large'
            name="alarm-outline"></ion-icon>


          <p *ngIf='respuestasEditar[i][0] != "cerrado"'
            style='margin-left: 7.5px; margin-right: 7.5px; font-weight: bold; color: black;'>-</p>
          <p *ngIf='respuestasEditar[i][0] == "cerrado"'
            style='margin-left: 2.5px; margin-right: 2.5px; font-weight: bold; color: black'>Cerrado</p>

          <ion-icon style='color: black; background-color: white;' (click)="picker.open()"
            *ngIf='respuestasEditar[i][1] == ""' size='large' name="alarm-outline"></ion-icon>

          <ion-datetime #picker displayFormat="HH:mm" locale="es-ES"
            style='margin-left: 3.5px; margin-right: auto; color: black !important'
            (ionChange)="changeDate(picker, i, 1)">
          </ion-datetime>




        </ion-item>

      </ion-card>






      <ion-card style="margin-top:15px">
        <ion-item class="item-background-color" lines='none'>
          <ion-label style='font-weight: bold;'>
            <ion-icon color="success" style='margin-right: 7.5px; font-weight: bold;' name="bicycle-outline"></ion-icon>
            ¿Entregas a domicilio? <b class='obligatorio'>*</b>
          </ion-label>
          <ion-select value='{{local.Domicilio}}' name='domicilio' ngModel>

            <ion-select-option value="Si">Sí</ion-select-option>
            <ion-select-option value="No">No</ion-select-option>

          </ion-select>

        </ion-item>
      </ion-card>



      <!-- <ion-item class="item-background-color">
        <ion-icon color="success" size='large' name="bicycle-outline"></ion-icon>
        <ion-label style = "margin-left: 6.5px;">¿Entregas a domicilio?</ion-label>
        <ion-select name='domicilio' ngModel>
         
                <ion-select-option value="Si">Sí</ion-select-option>
                <ion-select-option value="No">No</ion-select-option> 

        </ion-select>

      </ion-item> -->



      <!-- <ng-container>
        <ion-input style= 'text-align: center;' value="{{local.HorarioAtencion}}" name="horario" type='text' ngModel></ion-input>
      </ng-container> -->











      <!-- 
      <ng-container>
        
        <ion-input style= 'text-align: center;' value="{{local.Descripcion}}" name="descripcion" required type='text' ngModel></ion-input>
      </ng-container> -->





      <ion-item class="item-background-color">


        <ion-icon name="cloud-upload-outline" color='success'></ion-icon>
        <ion-label style='margin-left:7.5px' class='tituloCrear'>Cambiar foto</ion-label>
        <ion-input id="myFileInput" (change)="readURL($event);" accept="image/*" placeholder="archivo" name="archivo"
          type='file' ngModel value="{{file}}"></ion-input>


      </ion-item>

      <ion-item class="item-background-color" style='margin-top: 7.5px;'>

        <ion-img id="blah" [src]="image" alt=""
          style="margin-top:5px; margin-bottom: 5px; height: 250px;width: 275px;margin:auto;"></ion-img>


      </ion-item>











    </ion-list>

    <div class="ion-padding" align="center">
      <ion-button type="submit" [disabled]="form.invalid" expand="block" style="width: 150px;">
        Actualizar
      </ion-button>

    </div>
  </form>

</ion-content>
<style>
  #myFileInput {
    position: absolute;
    opacity: 0;
  }
</style>



<!-- <ion-card class="item-background-color" *ngIf = 'loaded'>
  <ion-item class="item-background-color" *ngFor='let dia of dias; let i = index'>
    <ion-label>{{dia}}</ion-label>

    <ion-label *ngIf='respuestas[i][0] == "" && respuestas[i][1] == ""' (click)='guardarHorario(i)'>
      <img src='../../../assets/cerrado.png' style="height: 25px; width: 58.5px; margin-left: 12.5px;" />
    </ion-label>

    <ion-icon style='color: black;' (click)="pickerB.open()"
      *ngIf='(respuestas[i][0] != "cerrado" || abrir[0]) && respuestas[i][0] == ""' size='large' name="alarm-outline"></ion-icon>

    <ion-datetime #pickerB displayFormat="HH:mm" locale="es-ES" style='margin-left: auto; margin-right: 3.5px;'
      (ionChange)="changeDate(pickerB, i, 0)" *ngIf='respuestas[i][0] != "cerrado" && abrir[i]'>
    </ion-datetime>

    <p *ngIf='iniciales[i][0] == true && respuestas[i][0] != "cerrado"' (click)="pickerB.open()"
      style='margin-left: 3.5px; margin-right: 2.5px; color: black;'> {{respuestas[i][0]}} {{abrir[i]}}</p>

    <p *ngIf='respuestas[i][0] != "cerrado" || abrir[i]'
      style='margin-left: 3.5px; margin-right: 2.5px; font-weight: bold; color: black;'> - </p>

      <p *ngIf='iniciales[i][1] == true && respuestas[i][1] != "cerrado"'
      style='margin-left: 3.5px; margin-right: 2.5px; color: black;'> {{respuestas[i][1]}} </p>

    <ion-datetime #pickerA displayFormat="HH:mm" *ngIf='respuestas[i][1] != "cerrado" && abrir[i]'
      locale="es-ES" style='margin-left: 2.5px; margin-right: auto;' (ionChange)="changeDate(pickerA, i, 1)">
    </ion-datetime>


    <ion-icon style='color: black;' (click)="pickerA.open()"
      *ngIf='(respuestas[i][0] != "cerrado" || abrir[i]) && respuestas[i][0] == ""' size='large' name="alarm-outline"></ion-icon>






    <p *ngIf='respuestas[i][0] == "cerrado" && abrir[i] == false'
      style='margin-left: 2.5px; margin-right: 14.5px; font-weight: bold; color: black'>Cerrado</p>

    <ion-icon style='color: black;' (click)="permitirAbrir(i)" *ngIf='respuestas[i][0] == "cerrado" && !abrir[i]'
      color='success' size='large' name="lock-open-outline"></ion-icon>




  </ion-item>

</ion-card> -->