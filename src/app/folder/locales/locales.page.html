<app-header nombre="locales"></app-header>

<ion-content>

  <ion-segment color="tertiary" value="todos">

    <ion-segment-button value="todos" [routerLink]="['/locales-todos']">
      <ion-icon name="gift-outline" size="large"></ion-icon>
      <ion-label style="font-size: 11px;">Locales</ion-label>
    </ion-segment-button>

    <ion-segment-button value="categorias" [routerLink]="['/categorias-locales']">
      <ion-icon name="list-outline" size="large"></ion-icon>
      <ion-label style="font-size: 11px;">Categorias</ion-label>
    </ion-segment-button>

  </ion-segment>



  <ion-searchbar color="light" placeholder="Buscar local..." animated (ionChange)="buscar($event)">
  </ion-searchbar>

  <ion-grid *ngIf="!loaded">
    <ion-row style="height: 450px;width: 100%;">
      <ion-col sizeLg="2" sizeMd="4" sizeXs="6" *ngFor="let producto of skeleton">

        
        <ion-card lines='none'  style='margin-bottom: 7.5px !important;'>

          <h1 style = 'width: 125px; text-align: center; margin: auto;'>
            <ion-skeleton-text [animated]="true" style="width: 50px; height: 15.5px;"></ion-skeleton-text>
          </h1>

          

          <ion-card-header id="headerCard">
            <ion-skeleton-text [animated]="true" style="width: 100%; height: 100%;"></ion-skeleton-text>
          </ion-card-header>

          <ion-card-content style = "margin-top: 7.5px;">
            <ng-container>
              <h1>
                <ion-skeleton-text [animated]="true" style="width: 125px; height: 18.2px;"></ion-skeleton-text>
              </h1>
              <h2>
                <ion-skeleton-text [animated]="true" style="width: 95%; height: 15.5px;"></ion-skeleton-text>
              </h2>



            </ng-container>
          </ion-card-content>


          <!-- <ion-item>
            <ion-label>
              <h3>
                <ion-skeleton-text [animated]="true" style="width: 85px;"></ion-skeleton-text>
              </h3>
              <p>
                <ion-skeleton-text [animated]="true" style="width: 95px;"></ion-skeleton-text>
              </p>
            </ion-label>
          </ion-item> -->
        </ion-card>

      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid *ngIf = '!condicion'>
    <ion-row style="height: 785.5px;width: 100%;">

      <ion-col sizeLg="2" sizeMd="4" sizeXs="6" *ngFor="let local of locales | filtroLocalProductos: textoBuscar">

        <ion-card [routerLink]="['/detalle-local',local.id, local.Usuario]" style='margin-bottom: 7.5px !important;'>
          <ion-card-content id='starts' style='align-items: left;'>
            <ion-item class = 'item-background-color' lines='none' style='align-items: left; text-align: left;'>
              <div slot='start' *ngFor='let indice of [].constructor(local.Calificacion); let i = index'
                style='width: 0.025%;margin-left: 0.00125px;'>
                <ion-icon name="star" color='warning'></ion-icon>
              </div>

            </ion-item>
          </ion-card-content>
          <ion-card-header id="headerCard" style='background-color: white !important;'>
            <ion-img *ngIf='local.Visibilidad' src="{{local.Foto}}" style="height: 100%; padding: 0;"></ion-img>
          </ion-card-header>


          <ion-card-content style='padding-top: 5px; width: 100%;'>
            <ion-label
              style='font-size: 14.5px; align-items: center;color: black; margin-top: 11.5px; font-weight: bold;'>
              {{local.Nombre.length > 25 ? local.Nombre.slice(0,25) + '..' : local.Nombre }} </ion-label>

            <!-- <h2>CALIFICACIÓN: {{local.Calificacion}}</h2> -->
          </ion-card-content>
          <ion-row class="card-footer">
            <ion-col>
              <ion-icon name="location-outline" color='danger' size='small'
                style='padding-left: 10px;padding-right: 7px;'></ion-icon>
              <p style='font-size: 15px; align-items: left; margin-top: 0px;margin-bottom: 0px; display: inline-block;'>
                {{local.Ciudadela}} </p>
            </ion-col>
          </ion-row>

        </ion-card>

      </ion-col>


    </ion-row>
  </ion-grid>


  <ng-container *ngIf="condicion">

    <div style="margin-top: 50px;" align='center'>
      <ion-text color="medium">

        <img
        src="../../../assets/vacio/locales_vacio.png"
        style="width: 175px; height: 175px;margin:auto;" alet="foto">

        <p style="font-size: 21px;margin:auto;margin-top:24.5px; width: 85%;">Por ahora no hay locales en esta categoría.</p>
      </ion-text>
    </div>
  </ng-container>


  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="validarSesion()">
      <ion-icon name="add-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>